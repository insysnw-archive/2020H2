# Лабораторная 1b
## Инструкция по использованию
Есть два варианта запуска:

1. Потребуется kotlin компилятор, который можно скачать по  [ссылке](https://kotlinlang.org/docs/tutorials/command-line.html).

Запустить из консоли:


`kotlinc -script Server.kts`

`kotlinc -script Client.kts`


Также можно и клиенту и серверу передавать в аргументы командной строки хост и порт в формате:

`<host> <port>` или `<host>`

2. Если есть Intelij Idea Enterprise: открыть в Ide, кликнуть правой кнопкой мыши по файлу -> Run 'Server.kts' или Run 'Client.kts'.
## Описание используемого протокола
Имеется один тип пакета: отправляемые от клиента к серверу и отправляемые от сервера клиенту.

Формат пакета:

Length message | Time  | Message | Length message | Name
--|--|--|--|--

По умолчанию сервер и клиент запускаются на адресе 127.0.0.1 и на порту - 9999, это можно изменить с помощью аргументов командной строки, как описано выше. 
Размеры Length message и Length name фиксированные – 1 байт. Там содержатся числа, закодированные в utf-8, - длина имени и сообщения. Соответственно, максимально возможная длина сообщения - 127 символов. Message, Time и Name тоже передаются в формате utf-8. В случае ввода сообщения или имени пользователя длиной больше, чем 127 символов, будут получены только первые 127, а остальное отброшено. Размер времени фиксирован, 5 байт, используется передача времени в 24 часовом формате разделенном двоеточием. 

## Реализация 
Чат написан на kotlin. Расширение файлов - kts, Что позволяет запускать файлы написанные на котлине как скрипты. Используются не блокирующие сокеты, входящие в пакет java.nio.
#### Сервер
При запуске сервера считываются аргументы командной строки. На сервере логируется информация о подключении и отключении клиентов, при этом имена клиентов и их сообщения не логируются и не хранятся на сервере. 
#### Клиент 
При запуске клиента также считываются аргументы командной строки, у пользователя запрашивается имя. Имя отправляется вместе с каждым сообщением, так как имена пользователей не хранятся на сервере. Выйти из программы можно с помощью команды "quit". Если запустить клиент, а сервер в этот момент не будет работать, выведется соответсвтующее сообщение и программа завершит работу.
